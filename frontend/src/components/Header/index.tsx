import React from 'react';
import { Grid, Typography, Tooltip } from '@material-ui/core';
import { Search, Brightness7, Edit, AccountCircle, Lock, GitHub } from '@material-ui/icons';
import { useHistory } from 'react-router-dom';
import { isLoggedIn } from '../../actions/authActions';

const Header: React.FC<{
    changeTheme: Function
}> = ({ changeTheme }) => {
    let history = useHistory();

    return (
        <Grid style={{ position: 'fixed', top: '10px', width: '100%', zIndex: 100 }} container>
            <Grid style={{ paddingLeft: '20px' }} item container justify='flex-start' alignItems='center' xs={10}>
                <Typography style={{ userSelect: 'none', fontWeight: 'bold', fontSize: '18px', cursor: 'pointer' }} onClick={() => history.push('/')}>exploit.me</Typography>
            </Grid>
            <Grid item container justify='flex-end' xs={2} spacing={2}>
                <Tooltip title='GitHub'>
                    <Grid item>
                        <GitHub onClick={() => window.open('https://github.com/alexandre-lavoie/exploit.me', '_blank')} style={{ cursor: 'pointer' }} />
                    </Grid>
                </Tooltip>

                <Tooltip title='Switch Theme'>
                    <Grid item>
                        <Brightness7 onClick={() => changeTheme()} style={{ cursor: 'pointer' }} />
                    </Grid>
                </Tooltip>

                {
                    (() => {
                        if (isLoggedIn()) {
                            return (
                                <Tooltip title='Exploit Editor'>
                                    <Grid item>
                                        <Edit style={{ cursor: 'pointer' }} onClick={() => history.push('/editor')} />
                                    </Grid>
                                </Tooltip>
                            )
                        }
                    })()
                }

                <Tooltip title='Search Exploits'>
                    <Grid item>
                        <Search style={{ cursor: 'pointer' }} onClick={() => history.push('/search')} />
                    </Grid>
                </Tooltip>

                {
                    (() => {
                        if (isLoggedIn()) {
                            return (
                                <Tooltip title='Logout'>
                                    <Grid item>
                                        <Lock style={{ cursor: 'pointer' }} onClick={() => history.push('/logout')} />
                                    </Grid>
                                </Tooltip>
                            )
                        } else {
                            return (
                                <Tooltip title='Login'>
                                    <Grid item>
                                        <AccountCircle style={{ cursor: 'pointer' }} onClick={() => history.push('/login')} />
                                    </Grid>
                                </Tooltip>
                            )
                        }
                    })()
                }
            </Grid>
        </Grid>
    )

}

export default Header;